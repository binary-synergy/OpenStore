@inherits NBrightBuy.render.NBrightBuyRazorTokens<NBrightRazor>
@using System.Linq
@using System.Web
@using DotNetNuke.Entities.Users
@using NBrightDNN
@using Nevoweb.DNN.NBrightBuy.Components;
@using DotNetNuke.Entities.Portals;

@AddMetaData("resourcepath", "/DesktopModules/NBright/NBrightBuy/App_LocalResources/")

<script>
    $(document).ready(function () {
        // set the required ajax parmas for this module
        $('#moduleid').val('@Model.ModuleId');
        $('#pagesize').val('@Model.GetSetting("pagesize", "0")');
        $('#themefolder').val('@Model.GetSetting("themefolder")');
        $('#entitytypecode').val('@Model.GetSetting("entitytypecode")');
        $("#modkey").val("@Model.ModuleRef");
        //loadProductList("@Model.ModuleId");
    });
</script>
@{
    var navigationdata = new NavigationData(PortalSettings.Current.PortalId, Model.GetSetting("modref"));
}

<div id="ajaxproducts@(Model.ModuleId)">

    <div style="margin-left: 20px; margin-right: 20px">
        <div class="eds_box eds_box_2">
            <h3 style="text-align: center;">@Category(navigationdata, "categoryname", Model)</h3>
        </div>

        <div class="eds_box eds_box_2">

            <div class="productlist">
                @foreach (NBrightInfo info in Model.List)
                {
                    var product = new ProductData(info.ItemID, info.Lang);
                    var itemId = info.ItemID;
                    var entryUrl = EntryUrl(navigationdata, info, Model);
                    var lang = info.Lang;

                <div class="eds_box eds_box_2 producthoz">

                    <h4>@ProductName(info)</h4>

                    <div class="eds_flipBox eds_flipTop">
                        <div class="eds_front">
                            <a href="@entryUrl" title="@ProductName(info)"><img class="img-fluid" style="max-width: 100%" title="@(info.GetXmlProperty("genxml/lang/genxml/textbox/txtsummary"))" src="@ProductImageUrl(info, 0, 160)"></a>
                        </div>
                        <div class="eds_behind">
                            @if (info.GetXmlProperty("genxml/lang/genxml/textbox/txtsummary") != "")
                            {
                                @(info.GetXmlProperty("genxml/lang/genxml/textbox/txtsummary"))
                            }
                        </div>
                    </div>

                    <a href="@entryUrl" class="eds_btn">More</a>                    

                </div>
                }
            </div>

        </div>

    </div>

</div>